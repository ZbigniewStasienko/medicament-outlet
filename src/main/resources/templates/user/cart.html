<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<h1>User Cart</h1>
<table border="1">
    <thead>
    <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Size</th>
        <th>Expiration Date</th>
        <th>Price</th>
        <th>Medicine Picture</th>
        <th>Pharmacy Name</th>
        <th>Pharmacy Address</th>
        <th>Pharmacy Picture</th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="product : ${productsInCart}">
        <td th:text="${product.medicine.name}"></td>
        <td th:text="${product.medicine.description}"></td>
        <td th:text="${product.medicine.size}"></td>
        <td th:text="${product.expirationDate != null ? product.expirationDate : 'N/A'}"></td>
        <td th:text="${product.price}"></td>
        <td th:if="${product.medicine.picture != null}">
            <img th:src="@{'/pictures/' + ${product.medicine.picture.id}}" alt="Medicine Picture" width="100"
                 height="100"/>
        </td>
        <td th:if="${product.medicine.picture == null}">
            No medicine picture
        </td>
        <td th:text="${product.medicine.pharmacy.name}"></td>
        <td th:text="${product.medicine.pharmacy.address}"></td>
        <td th:if="${product.medicine.pharmacy.picture != null}">
            <img th:src="@{'/pictures/' + ${product.medicine.pharmacy.picture.id}}" alt="Pharmacy Picture" width="100"
                 height="100"/>
        </td>
        <td th:if="${product.medicine.pharmacy.picture == null}">
            No pharmacy picture
        </td>

        <td>
            <form th:action="@{/reservation/deleteProduct}" method="post">
                <input type="hidden" th:name="productId" th:value="${product.id}"/>
                <button type="submit">Delete</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>

<form th:action="@{/reservation/purchase}" method="post">
    <button type="submit">Purchase</button>
</form>

<form th:action="@{/reservation/deleteProducts}" method="post">
    <button type="submit">Delete All Products</button>
</form>

</body>
</html>
